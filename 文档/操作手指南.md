

### 操作手指南 V 1.0

注：所有模式都可以重新设计，想实现任何功能都可以和电控组交流。

操作手**若熟悉电控代码设计思路和具体实现，就容易在赛场上处理应急情况**。当然，任何同学只要**训练得足够多**，**和电控队员交流得多**，都可以非常熟悉机器人的控制性能。

##### 安全说明

**当遥控器离线时，机器人进入无力模式**，各个机构发送零电流。这也可以用于在赛场上不用关闭总电源的前提下让机器人底盘无力，方便推动。遥控器重新上线时，机器人会根据遥控器右上方拨杆的位置确定模式。上——小陀螺；中——以底盘为坐标系运动；下——以云台为坐标系运动。**禁止在右拨杆朝上的情况下打开遥控器**，这可能导致遥控器上线时机器人就开始小陀螺旋转，需注意安全。

##### 模式设计说明

除了离线的无力模式外，机器人有三个工作模式。各个模式有不同特点，在键鼠操作和遥控器操作上相互补充。

###### 模式切换方法

三个模式都可以通过按键或者遥控器右拨杆的移动切换。键盘和拨杆冲突时，以**最新变化**的控制器（键盘或者遥控器拨杆）的命令为准。

可通过键盘切换三个模式，遥控器右上拨杆上中下也分别顺序对应三个模式。

###### 小陀螺模式：避弹（上）

小陀螺模式。为了给对方自瞄程序带来干扰，底盘持续自动转动，而云台发射机构一直面对对方机器人。



###### 普通车模式 ：完整运动（中）

机器人底盘可以直接实现复杂的运动，包括任意方向平移和附加旋转。机器人的移动复杂度其实受限于操作手的指令的简单性和遥控器通道的不足。普通车模式是为了完整实现机器人的所有行为。设计的键盘按键有前后左右平移和顺逆旋转，为底盘坐标系控制，亦即，以机器人的底盘而非操作手的视角为前后左右的参照。鼠标控制云台的单独的旋转。



###### 云台车模式 ： （下）


云台车模式是一种机器人控制模式，允许操作手以底盘和云台坐标系为基准进行控制。

在云台车模式下，机器人可以通过以下方式进行运动控制：

- 使用键盘上的wsad键控制机器人在底盘坐标系中的前后左右平移。
- 通过鼠标控制机器人在云台坐标系中的pitch和yaw。
- 遥控器左侧摇杆用于控制机器人在云台坐标系中的前后左右平移。

为了继续保证机器人的云台转向和自瞄功能，Auto模式minipc控制云台pitch和机器人整体转向。

使用上升沿检测做到按同一个键的

| 功能大类     | 功能细则                       | DT7                                                          | 键鼠      |
| ------------ | ------------------------------ | ------------------------------------------------------------ | --------- |
| 大类         | 遥控器控制电流通断（安全模式） |                                                              | -         |
| 移动控制     | 底盘移动                       | 通道0-1                                                      | WASD      |
| 云台移动     | 通道2-3                        |                                                              | 鼠标移动  |
| 超电开关     |                                |                                                              | 按下Shift |
| 小陀螺开关   |                                | 右边拨杆朝上                                                 | Ctrl      |
| 一键调头     | -                              |                                                              | C         |
| 射击控制     | 摩擦轮开关                     | 左边拨杆中-上-中                                             | F         |
| 弹丸发射     |                                | 摩擦轮开启后：<br />单发：左边拨杆中-下-中<br />连发：左边拨杆中-下 | 鼠标左键  |
| 自瞄发射     |                                | 左边拨轮向下                                                 | 鼠标右键  |
| 切换自瞄模式 | 切换打车、打符、吊射模式       | 暂无                                                         | 按E切换   |





###### 射击说明

射击的设计代码说明中，有相关操作设计和原因的说明

> 发射涉及两种电机。一个拨弹轮在弹舱内，起到输送荧光弹的作用；两个摩擦轮（摩擦力很大）的驱动电机在炮口位置。荧光弹的大小略小于弹性摩擦轮之间的间隙。为了发射子弹，需要首先开启摩擦轮，待摩擦轮速度增加到很高时，让拨弹轮转动，将子弹推到摩擦轮前，发射出去。如果摩擦轮未转动，而拨弹轮却将子弹推到了摩擦轮前，就会导致卡弹。

> 遥控器离线时关闭发射机构所有相关电机，开启摩擦轮。遥控器左上拨杆上拨后移到中间，可以开启或关闭摩擦轮。当遥控器左拨杆移到中间时，允许鼠标控制发射。鼠标左键按下后立刻抬起，发射一颗子弹；左键按住不放，连发。鼠标右键按下不放：允许minipc控制发射单发或者连发。

> 这里，长按是通过时间判断的。宏定义中有对长时间的定义，可以根据操作手的习惯修改时间。
>
> ```c
> #define PRESS_LONG_TIME     200    
> ```

> 射频也可以在宏定义中修改
>
> ```c
> //**************射击电机控制常量
> #define SHOOT_SPEED_LIMIT 0.60f          //摩擦轮速度
> #define SHOOT_TRIGGER_SPEED_LIMIT 0.60f   //拨弹轮开启时速度，或者连发速度
> 
> ```

##### 自瞄说明

右键开启自瞄发射，基本模式有三个，默认为1：

1. 打车模式

2. 打符模式
3. 吊射模式



